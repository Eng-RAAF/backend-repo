# Cursor Rules for Class Management System

## Convex Database Rules

- Use Convex for real-time data operations
- Import types from `convex/_generated/api` for type safety
- Use `v.validator()` from `convex/values` for input validation
- All Convex functions should be in TypeScript
- Use `query` for read operations, `mutation` for write operations
- Always handle errors in Convex functions with try-catch
- Use indexes defined in schema.ts for efficient queries

## Code Style

- Use ES modules (import/export)
- Use async/await for asynchronous operations
- Follow existing code patterns in the project
- Use descriptive variable and function names

## Database Operations

- When using Convex, convert IDs from `_id` to `id` string for compatibility
- Use the Convex client adapter in `lib/convex.js` for Express routes
- Handle both Prisma and Convex if `USE_CONVEX` environment variable is set

## Error Handling

- Always return meaningful error messages
- Log errors with context (request URL, method, etc.)
- Use appropriate HTTP status codes
- Provide helpful error messages for debugging

## API Design

- Follow RESTful conventions
- Use consistent response formats
- Include proper CORS headers
- Validate input data before processing

## TypeScript

- Use TypeScript for Convex functions
- Leverage generated types from `_generated/api`
- Use type inference where possible
- Add type annotations for complex types

